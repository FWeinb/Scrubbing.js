/*! Scrubber 01-01-2014 
 * Fabrice Weinberg 
 */
!function(a){var b={init:function(){},start:function(a){return parseInt(a.node.textContent,10)},change:function(a,b){a.node.textContent=b},end:function(){}},c=function(a,b,c){this.name=a,this.prop=b,this.divider=c||1};c.prototype={coordinate:function(a){return a[this.prop]},value:function(a,b){return Math.floor((b-a)/this.divider)}};var d=function(a,b){return function(d){return new c(a,b,d)}},e=d("Horizontal","clientX"),f=d("Vertical","clientY"),g=function(){var b,c,d=[],e=function(){this.removeEventListener("mousemove",b,!1),c&&c.options.adapter.end(c)},f=function(f){d.forEach(function(d){if(d.node===f.target){f.preventDefault(),c=d;var g=c.options.adapter.start(c),h=function(a){return c.options.adapter.change(c,a)},i=function(a){return c.options.resolver.coordinate(a)},j=function(a,b){return c.options.resolver.value(a,b)},k=i(f);return b=function(a){1===a.which?h(g+j(k,i(a))):e()},a.addEventListener("mousemove",b,!1),a.addEventListener("mouseup",e,!1),!0}})},g=function(){a.addEventListener("mousedown",f,!1),g=function(){}};return{init:function(a){d.push(a),g()},remove:function(a){for(var b=d.length-1;b>=0;b--){var c=a[b];if(c===a){d.splice(b,1);break}}}}}(),h=function(a,b){return a?"string"==typeof a?b[a]:a:void 0},i=function(a,b,c,d,e){a[e]=b?h(b[e],d)||c[e]:c[e]},j={driver:g,resolver:e(),adapter:b},k=function(a,b){return this instanceof k?(this.node=a,this.options={},i(this.options,b,j,k.driver,"driver"),i(this.options,b,j,k.resolver,"resolver"),i(this.options,b,j,k.adapter,"adapter"),this.node.dataset.scrubOrientation=this.options.resolver.name,this.options.adapter.init(this),this.options.driver.init(this),void 0):new k(b)};k.prototype={remove:function(){this.options.driver.remove(this)}},k.driver={Mouse:g},k.adapter={BasicNode:b},k.resolver={DefaultHorizontal:e(),DefaultVertical:e(),HorizontalProvider:e,VerticalProvider:f},a.Scrubber=k}(window);