/*! Scrubbing 01-01-2014 
 * Fabrice Weinberg 
 */
!function(a){var b={init:function(){},start:function(a){return parseInt(a.node.textContent,10)},change:function(a,b){a.node.textContent=b},end:function(){}},c=function(a,b,c,d){this.name=a,this.prop=b,this.factor=c||1,this.divider=d||1};c.prototype={coordinate:function(a){return a[this.prop]},value:function(a,b){return this.factor*Math.floor((b-a)/this.divider)}};var d=function(a,b,d){return function(e){return new c(a,b,d,e)}},e=d("Horizontal","clientX"),f=d("Vertical","clientY",-1),g=function(){var b,c,d=[],e=function(){this.removeEventListener("mousemove",b,!1),c&&c.options.adapter.end(c)},f=function(f){d.forEach(function(d){if(d.node===f.target){f.preventDefault(),c=d;var g=c.options.adapter.start(c),h=function(a){return c.options.resolver.coordinate(a)},i=h(f);return b=function(a){if(1===a.which){var b=c.options.resolver.value(i,h(a));c.options.adapter.change(c,g+b,b)}else e()},a.addEventListener("mousemove",b,!1),a.addEventListener("mouseup",e,!1),!0}})},g=function(){a.addEventListener("mousedown",f,!1),g=function(){}};return{init:function(a){d.push(a),g()},remove:function(a){for(var b=a.length-1;b>=0;b--){var c=a[b];if(c===a){a.splice(b,1);break}}}}}(),h=function(){return{init:function(a){a.node.addEventListener("mousewheel",function(b){b.preventDefault();var c=a.options.adapter.start(a);a.options.adapter.change(a,c-b.wheelDelta)},!1)},remove:function(){}}}(a),i=function(a,b){return a?"string"==typeof a?b[a]:a:void 0},j=function(a,b,c,d,e){a[e]=b?i(b[e],d)||c[e]:c[e]},k=function(a,b,c){Array.isArray(a)?a.forEach(function(a){a[b](c)}):a[b](c)},l={driver:[h,g],resolver:e(),adapter:b},m=function(a,b){return this instanceof m?(this.node=a,this.options={},j(this.options,b,l,m.driver,"driver"),j(this.options,b,l,m.resolver,"resolver"),j(this.options,b,l,m.adapter,"adapter"),this.node.dataset.scrubOrientation=this.options.resolver.name,k(this.options.adapter,"init",this),k(this.options.driver,"init",this),void 0):new m(b)};m.prototype={remove:function(){k(this.options.driver,"remove",this)}},m.driver={Mouse:g,MouseWheel:h},m.adapter={BasicNode:b},m.resolver={DefaultHorizontal:e(),DefaultVertical:f(),HorizontalProvider:e,VerticalProvider:f},a.Scrubbing=m}(window);